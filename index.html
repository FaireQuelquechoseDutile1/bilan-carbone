<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bilan Carbone</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; color: #333; }
.dark-mode { background-color: #1e1e1e; color: #f5f5f5; }
table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
th { background-color: #eee; }
.dark-mode th { background-color: #333; }
input[type="number"] { width: 80px; }
button { margin: 5px; }
#chartContainer { width: 100%; max-width: 800px; margin: auto; height: 400px; }
</style>
</head>
<body>

<h1 id="pageTitle">Bilan Carbone</h1>

<label for="languageSelect" id="labelLang">Langue :</label>
<select id="languageSelect" onchange="changeLanguage(this.value)">
    <option value="fr">Français</option>
    <option value="en">English</option>
    <option value="de">Deutsch</option>
    <option value="it">Italiano</option>
    <option value="es">Español</option>
    <option value="pt">Português</option>
    <option value="zh">中文</option>
    <option value="ja">日本語</option>
    <option value="ar">العربية</option>
    <option value="ru">Русский</option>
    <option value="fi">Suomi</option>
    <option value="sv">Svenska</option>
    <option value="hi">हिन्दी</option>
    <option value="bn">বাংলা</option>
    <option value="id">Bahasa Indonesia</option>
    <option value="tr">Türkçe</option>
</select>





<label for="darkSwitch" id="labelDark">Mode sombre :</label>
<input type="checkbox" id="darkSwitch" onchange="toggleDarkMode(this.checked)">


<table id="transportTable">
<thead>
<tr>
    <th id="colTransport">Transport</th>
    <th id="colCoeff">Coefficient d'usage</th>
    <th id="colDistance">Distance (km)</th>
    <th id="colUsage">Usage² (kg CO₂)</th>
    <th id="colConstruction">Construction (kg CO₂)</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
    <th>Total</th><th></th><th></th><th id="totalUsage">0</th><th id="totalConstruction">0</th>
</tr>
</tfoot>
</table>

<button id="exportCSVBtn" onclick="exportCSV()">Exporter CSV</button>
<button id="exportJSONBtn" onclick="exportJSON()">Exporter JSON</button>
<button id="resetCoeffBtn" onclick="resetCoefficients()">Réinitialiser les coefficients</button>
<button id="resetDistBtn" onclick="resetDistances()">Réinitialiser la distance</button>
<button id="toggleConstructionBtn" onclick="toggleConstruction()">Afficher/Masquer Construction</button>

<div id="chartContainer">
    <canvas id="co2Chart"></canvas>
</div>

<script type="text/javascript">
// --- Données des transports ---
const transports = {
    'voiture_essence': {name: 'Voiture essence', factor: 0.192, construction: 500},
    'voiture_diesel': {name: 'Voiture diesel', factor: 0.171, construction: 520},
    'tgv': {name: 'TGV', factor: 0.08, construction: 50},
    'intercite': {name: 'Intercité', factor: 0.07, construction: 45},
    'rer_transilien': {name: 'RER/Transilien', factor: 0.05, construction: 30},
    'autocar_thermique': {name: 'Autocar thermique', factor: 0.1, construction: 40},
    'covoiturage_electrique': {name: 'Covoiturage électrique', factor: 0.02, construction: 50},
    'covoiturage_thermique': {name: 'Covoiturage thermique', factor: 0.1, construction: 500},
    'moto_thermique': {name: 'Moto thermique', factor: 0.12, construction: 30},
    'scooter_thermique': {name: 'Scooter ou moto légère thermique', factor: 0.08, construction: 20},
    'avion_court': {name: 'Avion court-courrier', factor: 0.255, construction: 150},
    'avion_long': {name: 'Avion long-courrier', factor: 0.195, construction: 250},
    'velo': {name: 'Vélo', factor: 0, construction: 10},
    'velo_electrique': {name: 'Vélo électrique', factor: 0.01, construction: 20},
    'trottinette': {name: 'Trottinette', factor: 0, construction: 5},
    'trottinette_electrique': {name: 'Trottinette électrique', factor: 0.01, construction: 15},
    'tram': {name: 'Tram', factor: 0.03, construction: 30}
};

// --- Traductions ---
const translations = {
    en: {
        pageTitle: "Carbon Footprint",
        colTransport: "Transport",
        colCoeff: "Usage coefficient",
        colDistance: "Distance (km)",
        colUsage: "Usage² (kg CO₂)",
        colConstruction: "Construction (kg CO₂)",
        'Voiture essence':'Gasoline car', 'Voiture diesel':'Diesel car', 'TGV':'TGV',
        'Intercité':'Intercity', 'RER/Transilien':'RER/Commuter train', 'Autocar thermique':'Thermal bus',
        'Covoiturage électrique':'Electric carpool', 'Covoiturage thermique':'Thermal carpool',
        'Moto thermique':'Thermal motorcycle', 'Scooter ou moto légère thermique':'Thermal scooter/light motorcycle',
        'Avion court-courrier':'Short-haul plane', 'Avion long-courrier':'Long-haul plane',
        'Vélo':'Bike', 'Vélo électrique':'Electric bike', 'Trottinette':'Scooter', 'Trottinette électrique':'Electric scooter', 'Tram':'Tram',
        'Exporter CSV':'Export CSV', 'Exporter JSON':'Export JSON',
        'Réinitialiser les coefficients':'Reset coefficients', 'Réinitialiser la distance':'Reset distances',
        'Afficher/Masquer Construction':'Show/Hide Construction',
        'Langue :':'Language:', 'Mode sombre :':'Dark mode:'
    },
    de: {
        pageTitle: "CO₂-Bilanz",
        colTransport: "Transportmittel",
        colCoeff: "Nutzungsfaktor",
        colDistance: "Entfernung (km)",
        colUsage: "Nutzung² (kg CO₂)",
        colConstruction: "Herstellung (kg CO₂)",
        'Voiture essence':'Benzinauto', 'Voiture diesel':'Dieselauto', 'TGV':'TGV',
        'Intercité':'Intercity-Zug', 'RER/Transilien':'S-Bahn/Regionalbahn', 'Autocar thermique':'Reisebus',
        'Covoiturage électrique':'Elektrische Fahrgemeinschaft', 'Covoiturage thermique':'Thermische Fahrgemeinschaft',
        'Moto thermique':'Motorrad (Verbrenner)', 'Scooter ou moto légère thermique':'Roller/leichtes Motorrad (Verbrenner)',
        'Avion court-courrier':'Kurzstreckenflug', 'Avion long-courrier':'Langstreckenflug',
        'Vélo':'Fahrrad', 'Vélo électrique':'E-Bike', 'Trottinette':'Tretroller', 'Trottinette électrique':'E-Scooter', 'Tram':'Straßenbahn',
        'Exporter CSV':'CSV exportieren', 'Exporter JSON':'JSON exportieren',
        'Réinitialiser les coefficients':'Faktoren zurücksetzen', 'Réinitialiser la distance':'Entfernung zurücksetzen',
        'Afficher/Masquer Construction':'Herstellung ein/ausblenden',
        'Langue :':'Sprache:', 'Mode sombre :':'Dunkelmodus:'
    },
	it: {
		pageTitle: "Bilancio di carbonio",
		colTransport: "Trasporto",
		colCoeff: "Coefficiente d'uso",
		colDistance: "Distanza (km)",
		colUsage: "Uso² (kg CO₂)",
		colConstruction: "Costruzione (kg CO₂)",
		'Voiture essence':'Auto a benzina', 'Voiture diesel':'Auto diesel', 'TGV':'TGV',
		'Intercité':'Intercity', 'RER/Transilien':'Treno regionale', 'Autocar thermique':'Autobus termico',
		'Covoiturage électrique':'Carpooling elettrico', 'Covoiturage thermique':'Carpooling termico',
		'Moto thermique':'Moto a combustione', 'Scooter ou moto légère thermique':'Scooter/moto leggera a combustione',
		'Avion court-courrier':'Volo a corto raggio', 'Avion long-courrier':'Volo a lungo raggio',
		'Vélo':'Bicicletta', 'Vélo électrique':'Bicicletta elettrica', 'Trottinette':'Monopattino', 'Trottinette électrique':'Monopattino elettrico', 'Tram':'Tram',
		'Exporter CSV':'Esporta CSV', 'Exporter JSON':'Esporta JSON',
		'Réinitialiser les coefficients':'Reimposta coefficienti', 'Réinitialiser la distance':'Reimposta distanza',
		'Afficher/Masquer Construction':'Mostra/Nascondi costruzione',
		'Langue :':'Lingua:', 'Mode sombre :':'Modalità scura:'
	},
	es: {
		pageTitle: "Huella de carbono",
		colTransport: "Transporte",
		colCoeff: "Coeficiente de uso",
		colDistance: "Distancia (km)",
		colUsage: "Uso² (kg CO₂)",
		colConstruction: "Construcción (kg CO₂)",
		'Voiture essence':'Coche de gasolina', 'Voiture diesel':'Coche diésel', 'TGV':'TGV',
		'Intercité':'Intercity', 'RER/Transilien':'Cercanías/Regional', 'Autocar thermique':'Autobús térmico',
		'Covoiturage électrique':'Coche compartido eléctrico', 'Covoiturage thermique':'Coche compartido térmico',
		'Moto thermique':'Motocicleta térmica', 'Scooter ou moto légère thermique':'Scooter/moto ligera térmica',
		'Avion court-courrier':'Vuelo de corta distancia', 'Avion long-courrier':'Vuelo de larga distancia',
		'Vélo':'Bicicleta', 'Vélo électrique':'Bicicleta eléctrica', 'Trottinette':'Patinete', 'Trottinette électrique':'Patinete eléctrico', 'Tram':'Tranvía',
		'Exporter CSV':'Exportar CSV', 'Exporter JSON':'Exportar JSON',
		'Réinitialiser les coefficients':'Restablecer coeficientes', 'Réinitialiser la distance':'Restablecer distancia',
		'Afficher/Masquer Construction':'Mostrar/Ocultar construcción',
		'Langue :':'Idioma:', 'Mode sombre :':'Modo oscuro:'
	},
	pt: {
		pageTitle: "Balanço de carbono",
		colTransport: "Transporte",
		colCoeff: "Coeficiente de uso",
		colDistance: "Distância (km)",
		colUsage: "Uso² (kg CO₂)",
		colConstruction: "Construção (kg CO₂)",
		'Voiture essence':'Carro a gasolina', 'Voiture diesel':'Carro a diesel', 'TGV':'TGV',
		'Intercité':'Intercidades', 'RER/Transilien':'Trem regional', 'Autocar thermique':'Ônibus térmico',
		'Covoiturage électrique':'Carona elétrica', 'Covoiturage thermique':'Carona térmica',
		'Moto thermique':'Moto a combustão', 'Scooter ou moto légère thermique':'Scooter/moto leve a combustão',
		'Avion court-courrier':'Voo de curta distância', 'Avion long-courrier':'Voo de longa distância',
		'Vélo':'Bicicleta', 'Vélo électrique':'Bicicleta elétrica', 'Trottinette':'Patinete', 'Trottinette électrique':'Patinete elétrico', 'Tram':'Elétrico',
		'Exporter CSV':'Exportar CSV', 'Exporter JSON':'Exportar JSON',
		'Réinitialiser les coefficients':'Redefinir coeficientes', 'Réinitialiser la distance':'Redefinir distância',
		'Afficher/Masquer Construction':'Mostrar/Ocultar construção',
		'Langue :':'Idioma:', 'Mode sombre :':'Modo escuro:'
	},
	zh: {
		pageTitle: "碳足迹",
		colTransport: "交通方式",
		colCoeff: "使用系数",
		colDistance: "距离 (公里)",
		colUsage: "使用² (千克二氧化碳)",
		colConstruction: "建造 (千克二氧化碳)",
		'Voiture essence':'汽油车', 'Voiture diesel':'柴油车', 'TGV':'高速列车',
		'Intercité':'城际列车', 'RER/Transilien':'市郊列车', 'Autocar thermique':'柴油长途汽车',
		'Covoiturage électrique':'电动拼车', 'Covoiturage thermique':'燃油拼车',
		'Moto thermique':'燃油摩托车', 'Scooter ou moto légère thermique':'燃油轻便摩托车',
		'Avion court-courrier':'短途航班', 'Avion long-courrier':'长途航班',
		'Vélo':'自行车', 'Vélo électrique':'电动自行车', 'Trottinette':'滑板车', 'Trottinette électrique':'电动滑板车', 'Tram':'有轨电车',
		'Exporter CSV':'导出 CSV', 'Exporter JSON':'导出 JSON',
		'Réinitialiser les coefficients':'重置系数', 'Réinitialiser la distance':'重置距离',
		'Afficher/Masquer Construction':'显示/隐藏建造',
		'Langue :':'语言:', 'Mode sombre :':'深色模式:'
	},
	ja: {
		pageTitle: "カーボンフットプリント",
		colTransport: "交通手段",
		colCoeff: "使用係数",
		colDistance: "距離 (km)",
		colUsage: "使用² (kg CO₂)",
		colConstruction: "建設 (kg CO₂)",
		'Voiture essence':'ガソリン車', 'Voiture diesel':'ディーゼル車', 'TGV':'高速鉄道',
		'Intercité':'都市間列車', 'RER/Transilien':'通勤列車', 'Autocar thermique':'ディーゼルバス',
		'Covoiturage électrique':'電気カープール', 'Covoiturage thermique':'ガソリンカープール',
		'Moto thermique':'ガソリンバイク', 'Scooter ou moto légère thermique':'ガソリンスクーター/軽二輪',
		'Avion court-courrier':'短距離便', 'Avion long-courrier':'長距離便',
		'Vélo':'自転車', 'Vélo électrique':'電動自転車', 'Trottinette':'キックスケーター', 'Trottinette électrique':'電動キックスケーター', 'Tram':'路面電車',
		'Exporter CSV':'CSVエクスポート', 'Exporter JSON':'JSONエクスポート',
		'Réinitialiser les coefficients':'係数をリセット', 'Réinitialiser la distance':'距離をリセット',
		'Afficher/Masquer Construction':'建設の表示/非表示',
		'Langue :':'言語:', 'Mode sombre :':'ダークモード:'
	},
	ar: {
		pageTitle: "البصمة الكربونية",
		colTransport: "وسيلة النقل",
		colCoeff: "معامل الاستخدام",
		colDistance: "المسافة (كم)",
		colUsage: "الاستخدام² (كغ CO₂)",
		colConstruction: "الإنشاء (كغ CO₂)",
		'Voiture essence':'سيارة بنزين', 'Voiture diesel':'سيارة ديزل', 'TGV':'قطار فائق السرعة',
		'Intercité':'قطار بين المدن', 'RER/Transilien':'قطار ضواحي', 'Autocar thermique':'حافلة ديزل',
		'Covoiturage électrique':'مشاركة سيارة كهربائية', 'Covoiturage thermique':'مشاركة سيارة حرارية',
		'Moto thermique':'دراجة نارية حرارية', 'Scooter ou moto légère thermique':'سكوتر / دراجة خفيفة حرارية',
		'Avion court-courrier':'رحلة قصيرة', 'Avion long-courrier':'رحلة طويلة',
		'Vélo':'دراجة هوائية', 'Vélo électrique':'دراجة كهربائية', 'Trottinette':'سكوتر', 'Trottinette électrique':'سكوتر كهربائي', 'Tram':'ترام',
		'Exporter CSV':'تصدير CSV', 'Exporter JSON':'تصدير JSON',
		'Réinitialiser les coefficients':'إعادة تعيين المعاملات', 'Réinitialiser la distance':'إعادة تعيين المسافة',
		'Afficher/Masquer Construction':'إظهار/إخفاء الإنشاء',
		'Langue :':'اللغة:', 'Mode sombre :':'الوضع الداكن:'
	},
	ru: {
		pageTitle: "Углеродный след",
		colTransport: "Транспорт",
		colCoeff: "Коэффициент использования",
		colDistance: "Расстояние (км)",
		colUsage: "Использование² (кг CO₂)",
		colConstruction: "Строительство (кг CO₂)",
		'Voiture essence':'Бензиновый автомобиль', 'Voiture diesel':'Дизельный автомобиль', 'TGV':'Скоростной поезд',
		'Intercité':'Междугородный поезд', 'RER/Transilien':'Пригородный поезд', 'Autocar thermique':'Дизельный автобус',
		'Covoiturage électrique':'Электрокарпул', 'Covoiturage thermique':'Карпул на ДВС',
		'Moto thermique':'Мотоцикл (ДВС)', 'Scooter ou moto légère thermique':'Скутер/лёгкий мотоцикл (ДВС)',
		'Avion court-courrier':'Короткий перелёт', 'Avion long-courrier':'Дальний перелёт',
		'Vélo':'Велосипед', 'Vélo électrique':'Электровелосипед', 'Trottinette':'Самокат', 'Trottinette électrique':'Электросамокат', 'Tram':'Трамвай',
		'Exporter CSV':'Экспорт CSV', 'Exporter JSON':'Экспорт JSON',
		'Réinitialiser les coefficients':'Сброс коэффициентов', 'Réinitialiser la distance':'Сброс расстояния',
		'Afficher/Masquer Construction':'Показать/Скрыть строительство',
		'Langue :':'Язык:', 'Mode sombre :':'Тёмный режим:'
	},
	fi: {
		pageTitle: "Hiilijalanjälki",
		colTransport: "Liikkumistapa",
		colCoeff: "Käyttökerroin",
		colDistance: "Etäisyys (km)",
		colUsage: "Käyttö² (kg CO₂)",
		colConstruction: "Rakentaminen (kg CO₂)",
		'Voiture essence':'Bensiiniauto', 'Voiture diesel':'Dieselauto', 'TGV':'Suurnopeusjuna',
		'Intercité':'Kaukojuna', 'RER/Transilien':'Lähijuna', 'Autocar thermique':'Dieselbussi',
		'Covoiturage électrique':'Sähkö kimppakyyti', 'Covoiturage thermique':'Polttomoottori kimppakyyti',
		'Moto thermique':'Polttomoottoripyörä', 'Scooter ou moto légère thermique':'Kevyt polttomoottoriskootteri',
		'Avion court-courrier':'Lyhyen matkan lento', 'Avion long-courrier':'Pitkän matkan lento',
		'Vélo':'Polkupyörä', 'Vélo électrique':'Sähköpyörä', 'Trottinette':'Potkulauta', 'Trottinette électrique':'Sähköpotkulauta', 'Tram':'Raitiovaunu',
		'Exporter CSV':'Vie CSV', 'Exporter JSON':'Vie JSON',
		'Réinitialiser les coefficients':'Palauta kertoimet', 'Réinitialiser la distance':'Palauta etäisyys',
		'Afficher/Masquer Construction':'Näytä/Piilota rakentaminen',
		'Langue :':'Kieli:', 'Mode sombre :':'Tumma tila:'
	},
	sv: {
		pageTitle: "Koldioxidavtryck",
		colTransport: "Transportmedel",
		colCoeff: "Användningskoefficient",
		colDistance: "Avstånd (km)",
		colUsage: "Användning² (kg CO₂)",
		colConstruction: "Byggnation (kg CO₂)",
		'Voiture essence':'Bensinbil', 'Voiture diesel':'Dieselbil', 'TGV':'Höghastighetståg',
		'Intercité':'Intercitytåg', 'RER/Transilien':'Pendeltåg', 'Autocar thermique':'Dieselbuss',
		'Covoiturage électrique':'Elbilssamåkning', 'Covoiturage thermique':'Bränslebilssamåkning',
		'Moto thermique':'Motorcykel (bränsle)', 'Scooter ou moto légère thermique':'Skoter/lätt motorcykel (bränsle)',
		'Avion court-courrier':'Kortdistansflyg', 'Avion long-courrier':'Långdistansflyg',
		'Vélo':'Cykel', 'Vélo électrique':'Elcykel', 'Trottinette':'Sparkcykel', 'Trottinette électrique':'Elsparkcykel', 'Tram':'Spårvagn',
		'Exporter CSV':'Exportera CSV', 'Exporter JSON':'Exportera JSON',
		'Réinitialiser les coefficients':'Återställ koefficienter', 'Réinitialiser la distance':'Återställ avstånd',
		'Afficher/Masquer Construction':'Visa/Dölj byggnation',
		'Langue :':'Språk:', 'Mode sombre :':'Mörkt läge:'
	},
	hi: {
		pageTitle: "कार्बन पदचिह्न",
		colTransport: "परिवहन",
		colCoeff: "उपयोग गुणांक",
		colDistance: "दूरी (किमी)",
		colUsage: "उपयोग² (किग्रा CO₂)",
		colConstruction: "निर्माण (किग्रा CO₂)",
		'Voiture essence':'पेट्रोल कार', 'Voiture diesel':'डीजल कार', 'TGV':'टीजीवी',
		'Intercité':'इंटरसिटी', 'RER/Transilien':'रेल/कम्यूटर ट्रेन', 'Autocar thermique':'थर्मल बस',
		'Covoiturage électrique':'इलेक्ट्रिक कारपूल', 'Covoiturage thermique':'थर्मल कारपूल',
		'Moto thermique':'थर्मल मोटरसाइकिल', 'Scooter ou moto légère thermique':'थर्मल स्कूटर/हल्की मोटरसाइकिल',
		'Avion court-courrier':'लघु-दूरी विमान', 'Avion long-courrier':'लंबी-दूरी विमान',
		'Vélo':'साइकिल', 'Vélo électrique':'इलेक्ट्रिक साइकिल', 'Trottinette':'स्कूटर', 'Trottinette électrique':'इलेक्ट्रिक स्कूटर', 'Tram':'ट्राम',
		'Exporter CSV':'CSV निर्यात करें', 'Exporter JSON':'JSON निर्यात करें',
		'Réinitialiser les coefficients':'गुणांक रीसेट करें', 'Réinitialiser la distance':'दूरी रीसेट करें',
		'Afficher/Masquer Construction':'निर्माण दिखाएँ/छिपाएँ',
		'Langue :':'भाषा:', 'Mode sombre :':'डार्क मोड:'
	},
	
	bn: {
		pageTitle: "কার্বন পদচিহ্ন",
		colTransport: "পরিবহন",
		colCoeff: "ব্যবহারের সহগ",
		colDistance: "দূরত্ব (কিমি)",
		colUsage: "ব্যবহার² (কেজি CO₂)",
		colConstruction: "নির্মাণ (কেজি CO₂)",
		'Voiture essence':'পেট্রোল গাড়ি', 'Voiture diesel':'ডিজেল গাড়ি', 'TGV':'টিজিভি',
		'Intercité':'ইন্টারসিটি', 'RER/Transilien':'কমিউটার ট্রেন', 'Autocar thermique':'থার্মাল বাস',
		'Covoiturage électrique':'ইলেকট্রিক কারপুল', 'Covoiturage thermique':'থার্মাল কারপুল',
		'Moto thermique':'থার্মাল মোটরসাইকেল', 'Scooter ou moto légère thermique':'থার্মাল স্কুটার/হালকা মোটরসাইকেল',
		'Avion court-courrier':'স্বল্প দূরত্বের ফ্লাইট', 'Avion long-courrier':'দীর্ঘ দূরত্বের ফ্লাইট',
		'Vélo':'সাইকেল', 'Vélo électrique':'ইলেকট্রিক সাইকেল', 'Trottinette':'স্কুটার', 'Trottinette électrique':'ইলেকট্রিক স্কুটার', 'Tram':'ট্রাম',
		'Exporter CSV':'CSV রপ্তানি করুন', 'Exporter JSON':'JSON রপ্তানি করুন',
		'Réinitialiser les coefficients':'সহগ রিসেট করুন', 'Réinitialiser la distance':'দূরত্ব রিসেট করুন',
		'Afficher/Masquer Construction':'নির্মাণ দেখান/লুকান',
		'Langue :':'ভাষা:', 'Mode sombre :':'ডার্ক মোড:'
	},
	
	id: {
		pageTitle: "Jejak Karbon",
		colTransport: "Transportasi",
		colCoeff: "Koefisien penggunaan",
		colDistance: "Jarak (km)",
		colUsage: "Penggunaan² (kg CO₂)",
		colConstruction: "Konstruksi (kg CO₂)",
		'Voiture essence':'Mobil bensin', 'Voiture diesel':'Mobil diesel', 'TGV':'TGV',
		'Intercité':'Kereta antar kota', 'RER/Transilien':'Kereta komuter', 'Autocar thermique':'Bus termal',
		'Covoiturage électrique':'Carpool listrik', 'Covoiturage thermique':'Carpool termal',
		'Moto thermique':'Motor termal', 'Scooter ou moto légère thermique':'Skuter/motor ringan termal',
		'Avion court-courrier':'Penerbangan jarak dekat', 'Avion long-courrier':'Penerbangan jarak jauh',
		'Vélo':'Sepeda', 'Vélo électrique':'Sepeda listrik', 'Trottinette':'Skuter', 'Trottinette électrique':'Skuter listrik', 'Tram':'Trem',
		'Exporter CSV':'Ekspor CSV', 'Exporter JSON':'Ekspor JSON',
		'Réinitialiser les coefficients':'Reset koefisien', 'Réinitialiser la distance':'Reset jarak',
		'Afficher/Masquer Construction':'Tampilkan/Sembunyikan Konstruksi',
		'Langue :':'Bahasa:', 'Mode sombre :':'Mode gelap:'
	},
	
	tr: {
		pageTitle: "Karbon Ayak İzi",
		colTransport: "Ulaşım",
		colCoeff: "Kullanım katsayısı",
		colDistance: "Mesafe (km)",
		colUsage: "Kullanım² (kg CO₂)",
		colConstruction: "İnşaat (kg CO₂)",
		'Voiture essence':'Benzinli araba', 'Voiture diesel':'Dizel araba', 'TGV':'TGV',
		'Intercité':'Şehirlerarası tren', 'RER/Transilien':'Banliyö treni', 'Autocar thermique':'Termal otobüs',
		'Covoiturage électrique':'Elektrikli ortak araç', 'Covoiturage thermique':'Termal ortak araç',
		'Moto thermique':'Termal motosiklet', 'Scooter ou moto légère thermique':'Termal scooter/hafif motosiklet',
		'Avion court-courrier':'Kısa mesafe uçuş', 'Avion long-courrier':'Uzun mesafe uçuş',
		'Vélo':'Bisiklet', 'Vélo électrique':'Elektrikli bisiklet', 'Trottinette':'Scooter', 'Trottinette électrique':'Elektrikli scooter', 'Tram':'Tramvay',
		'Exporter CSV':'CSV Dışa Aktar', 'Exporter JSON':'JSON Dışa Aktar',
		'Réinitialiser les coefficients':'Katsayıları sıfırla', 'Réinitialiser la distance':'Mesafeleri sıfırla',
		'Afficher/Masquer Construction':'İnşaatı Göster/Gizle',
		'Langue :':'Dil:', 'Mode sombre :':'Karanlık mod:'
	},
    fr: {} // français par défaut
};


// --- Génération du tableau ---
function generateTable() {
    const tbody = document.querySelector('#transportTable tbody');
    tbody.innerHTML = '';
    for (const key in transports) {
        const tr = document.createElement('tr');
        tr.dataset.key = key;
        tr.innerHTML = `
            <td>${transports[key].name}</td>
            <td><input type="number" step="0.01" value="${transports[key].factor}" onchange="updateTable()"></td>
            <td><input type="number" value="0" onchange="updateTable()"></td>
            <td>0</td>
            <td>${transports[key].construction}</td>
        `;
        tbody.appendChild(tr);
    }
}

// --- Construction toggle ---
let showConstruction = true;
function toggleConstruction() {
    showConstruction = !showConstruction;
    updateTable();
}

// --- Mise à jour du tableau et graphique ---
let co2Chart;
function updateTable() {
    let totalUsage = 0, totalConstruction = 0;
    const tbody = document.querySelector('#transportTable tbody');
    const chartLabels = [], chartUsage = [], chartConstruction = [];

    tbody.querySelectorAll('tr').forEach(row => {
        const coeff = parseFloat(row.cells[1].querySelector('input').value) || 0;
        const distance = parseFloat(row.cells[2].querySelector('input').value) || 0;
        const usage = coeff * distance;
        row.cells[3].textContent = usage.toFixed(2);
        totalUsage += usage;

        const construction = parseFloat(row.cells[4].textContent) || 0;
        if(distance > 0) totalConstruction += construction;

        if(distance > 0) {
            chartLabels.push(row.cells[0].textContent);
            chartUsage.push(usage);
            chartConstruction.push(construction);
        }
    });

    document.getElementById('totalUsage').textContent = totalUsage.toFixed(2);
    document.getElementById('totalConstruction').textContent = totalConstruction.toFixed(2);

    const ctx = document.getElementById('co2Chart').getContext('2d');
    if(co2Chart) co2Chart.destroy();
    co2Chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: chartLabels,
            datasets: [
                {label: translations[document.getElementById('languageSelect').value].colUsage || 'Usage', data: chartUsage, backgroundColor: 'rgba(75, 192, 192, 0.7)'},
                {label: translations[document.getElementById('languageSelect').value].colConstruction || 'Construction', data: chartConstruction, backgroundColor: 'rgba(192, 75, 192, 0.7)', hidden: !showConstruction}
            ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
}

// --- Export CSV et JSON ---
function exportCSV() {
    let csv = "Transport,Coefficient,Distance,Usage,Construction\n";
    document.querySelectorAll('#transportTable tbody tr').forEach(row => {
        const rowData = Array.from(row.cells).map(cell => cell.textContent);
        csv += rowData.join(',') + "\n";
    });
    const blob = new Blob([csv], {type: 'text/csv'});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'bilan_carbone.csv';
    link.click();
}

function exportJSON() {
    const data = {};
    document.querySelectorAll('#transportTable tbody tr').forEach(row => {
        const key = row.dataset.key;
        data[key] = {
            name: row.cells[0].textContent,
            coefficient: parseFloat(row.cells[1].querySelector('input').value) || 0,
            distance: parseFloat(row.cells[2].querySelector('input').value) || 0,
            usage: parseFloat(row.cells[3].textContent) || 0,
            construction: parseFloat(row.cells[4].textContent) || 0
        };
    });
    const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'bilan_carbone.json';
    link.click();
}

// --- Réinitialisations ---
function resetCoefficients() {
    document.querySelectorAll('#transportTable tbody tr').forEach(row => {
        const key = row.dataset.key;
        row.cells[1].querySelector('input').value = transports[key].factor;
    });
    updateTable();
}
function resetDistances() {
    document.querySelectorAll('#transportTable tbody tr').forEach(row => row.cells[2].querySelector('input').value = 0);
    updateTable();
}

// --- Dark mode ---
function toggleDarkMode(checked) {
    document.body.classList.toggle('dark-mode', checked);
}

// --- Changement de langue ---
function changeLanguage(lang) {
    document.getElementById('pageTitle').textContent = translations[lang].pageTitle || 'Bilan Carbone';
    document.getElementById('colTransport').textContent = translations[lang].colTransport || 'Transport';
    document.getElementById('colCoeff').textContent = translations[lang].colCoeff || 'Coefficient d\'usage';
    document.getElementById('colDistance').textContent = translations[lang].colDistance || 'Distance (km)';
    document.getElementById('colUsage').textContent = translations[lang].colUsage || 'Usage² (kg CO₂)';
    document.getElementById('colConstruction').textContent = translations[lang].colConstruction || 'Construction (kg CO₂)';
	document.getElementById('labelLang').textContent = translations[lang]['Langue :'] || 'Langue :';
	document.getElementById('labelDark').textContent = translations[lang]['Mode sombre :'] || 'Mode sombre :';

    document.querySelectorAll('#transportTable tbody tr').forEach(row => {
        const key = row.dataset.key;
        row.cells[0].textContent = translations[lang][transports[key].name] || transports[key].name;
    });

    document.getElementById('exportCSVBtn').textContent = translations[lang]['Exporter CSV'] || 'Exporter CSV';
    document.getElementById('exportJSONBtn').textContent = translations[lang]['Exporter JSON'] || 'Exporter JSON';
    document.getElementById('resetCoeffBtn').textContent = translations[lang]['Réinitialiser les coefficients'] || 'Réinitialiser les coefficients';
    document.getElementById('resetDistBtn').textContent = translations[lang]['Réinitialiser la distance'] || 'Réinitialiser la distance';
    document.getElementById('toggleConstructionBtn').textContent = translations[lang]['Afficher/Masquer Construction'] || 'Afficher/Masquer Construction';

    updateTable();
}

// --- Initialisation ---
generateTable();
updateTable();
</script>

</body>
</html>
